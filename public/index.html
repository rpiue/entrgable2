<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Descarga el APK desarrollado por Jairo Huaripata y revisa el código en GitHub.">
    <meta name="keywords" content="descargar APK, Jairo Huaripata, ver código, GitHub">
    <meta name="author" content="Jairo Huaripata">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script type="text/javascript">
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });
    </script>
    <title>Descarga el APK</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            /* Asegura que el contenido se centre vertical y horizontalmente */
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* Soporta contenido adicional mejor que 'height: 100vh' */
            margin: 0;
            /* Elimina márgenes por defecto */
            background: linear-gradient(62deg, #191a1d, #473d97, #292929, #0f0f2e);
            background-size: 200% 200%;
            animation: gradientShift 10s ease-in-out infinite;
            color: #fff;
            /* Asegura que el texto contraste bien con el fondo */
        }

        /* Animación del cambio de fondo */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        

        /* Personalización de la barra de desplazamiento para navegadores basados en WebKit */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #191a1d; /* Color de fondo del track */
           /* border-radius: 10px;*/
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #0b0033, #252525); /* Gradiente del scroll */
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #190073, #252525); /* Gradiente al pasar el cursor */
        }

        /* Personalización para Firefox */
        .scroll-container {
            scrollbar-color: #4e91a1 #e0e0e0; /* Color del thumb y del track */
            scrollbar-width: thin; /* Ancho del scrollbar */
        }

        header {
            text-align: center;
            padding: 20px 10px;
        }

        header h1 {
            font-size: 2.5rem;
            margin: 0;
            color: #fff;
        }

        .containerUI {
            max-width: 700px;
            margin: 40px;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 30px;
            color: #333;
            text-align: center;
            justify-content: center;
        }

        .containerUI img {
            max-width: 100%;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .containerUI h2 {
            font-size: 1.8rem;
            margin: 20px 0 10px;
        }

        .containerUI p {
            font-size: 1rem;
            line-height: 1.5;
            margin: 10px 0 20px;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .buttons a {
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.2s;
        }

        .buttons a.download {
            background-color: #4CAF50;
            color: #fff;
        }

        .buttons a.github {
            background-color: #24292e;
            color: #fff;
        }

        .buttons a:hover {
            transform: scale(1.05);
        }

        .buttons a.download:hover {
            background-color: #45a049;
        }

        .buttons a.github:hover {
            background-color: #444;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: #fff;
            font-size: 0.9rem;
            padding: 20px;
        }

        footer a {
            color: #ffeb3b;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Estilo para la terminal */
        .terminal-containerUI {
            margin-top: 40px;
            background-color: #1e1e1e;
            padding: 40px;
            border-radius: 8px;
            color: #d4d4d4;
            font-family: "Courier New", Courier, monospace;
            width: 90%;
            max-width: 800px;
            height: 400px;
            overflow-y: auto;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        /* Estilo para los elementos JSON */
        .json-key {
            color: #99d1ea;
            /* Naranja */
        }

        .json-value {
            color: #ce9178;
            /* Amarillo */
        }

        .json-string {
            color: #dfab9c;
            /* Rosa claro */
        }

        .json-number {
            color: #b5cea8;
            /* Verde claro */
        }

        .json-boolean {
            color: #569cd6;
            /* Azul */
        }

        .json-null {
            color: #000000;
            /* Negro */
        }

        .terminal {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 0.9rem;
            line-height: 1.5;
        }


        .terminal-containerUI-wrapper {
            display: flex;
            justify-content: space-between;
            /* Espaciado entre los dos terminales */
            gap: 20px;
            /* Separación entre las columnas */
            flex-wrap: wrap;
            /* Permite que los contenedores se ajusten cuando no haya suficiente espacio */
        }

        @media (max-width: 768px) {
            .terminal-containerUI {
                width: 100%;
                /* En pantallas pequeñas, ocupa el 100% del ancho */
                margin-bottom: 20px;
                /* Espaciado entre las columnas cuando estén en fila */
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>Descarga el APK</h1>
        <p>Desarrollado por Jairo Huaripata</p>
    </header>
    <center>


        <div class="containerUI">
            <img src="logo.png" alt="Vista previa del APK" width="100">
            <h2>Aplicación Android</h2>
            <p>Descarga la última versión del APK y explora el código fuente en GitHub para saber más sobre este
                proyecto.
            </p>
            <div class="buttons">
                <a href="" class="download" id="downloadLink">Descargar APK</a>
                <a href="https://github.com/JairoHuaripata/Entregable-2" target="_blank" class="github">Ver Código</a>
            </div>
        </div>
    </center>

    <!-- Terminal para mostrar el contenido de los archivos JSON -->
    <p class="center-text">Aquí están las copias de seguridad disponibles para descargar:</p>

    <style>
        .center-text {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            margin-bottom: 20px;
        }
    </style>

    <div class="terminal-containerUI-wrapper">
        <div class="terminal-containerUI">
            <h3>Backup de la Colección App</h3>
            <button id="downloadAppBackup" class="download-button">Descargar Backup de App</button>

            <div id="terminal" class="terminal">Cargando archivo JSON de App...</div>
        </div>

        <div class="terminal-containerUI">
            <h3>Backup de la Colección Usuarios</h3>
            <button id="downloadUserBackup" class="download-button">Descargar Backup de Usuarios</button>

            <div id="terminal2" class="terminal">Cargando archivo JSON de Usuarios...</div>
        </div>
    </div>


    <footer>
        &copy; 2025 Jairo Huaripata. Todos los derechos reservados. Visita mi <a
            href="https://github.com/JairoHuaripata/Entregable-2" target="_blank">GitHub</a>.
    </footer>


    <script>
        class APKDownloader {
            constructor() {
                this.architecture = this.getArchitecture();
                this.downloadLinks = {
                    'armeabi-v7a': 'https://www.mediafire.com/file/gfi25lvkxbvtuwh/Entregable_2.apk/file',
                    'arm64-v8a': 'https://www.mediafire.com/file/0chd3wq27sbnpep/Entregable_2.apk/file',
                    'x86_64': 'https://www.mediafire.com/file/9995sj10fivtwix/Entregable_2.apk/file',
                    'default': 'https://www.mediafire.com/folder/9an0aq81iiiwq/Entregable+2'
                };
            }

            // Detecta la arquitectura del dispositivo
            getArchitecture() {
                const { platform, userAgent } = navigator;
                const lowerPlatform = platform.toLowerCase();
                const lowerUserAgent = userAgent.toLowerCase();

                if (lowerPlatform.includes('arm64') || lowerUserAgent.includes('aarch64') || lowerUserAgent.includes('armv8')) {
                    return 'arm64-v8a';
                } else if (lowerPlatform.includes('arm') || lowerUserAgent.includes('armeabi') || lowerUserAgent.includes('armv7')) {
                    return 'armeabi-v7a';
                } else if (lowerPlatform.includes('x86_64') || lowerUserAgent.includes('x86_64') || lowerUserAgent.includes('amd64')) {
                    return 'x86_64';
                }
                return 'default';
            }

            // Genera los enlaces de descarga
            generateDownloadLinks() {
                const downloadLinks = document.querySelectorAll('#downloadLink');
                const apkLink = this.downloadLinks[this.architecture];

                downloadLinks.forEach(link => {
                    link.href = apkLink;
                    //  link.style.display = this.architecture === 'default' ? 'none' : 'inline-block';
                });
            }
        }

        async function getJsonData() {
            try {
                // Obtiene datos del servidor
                const [appResponse, userResponse] = await Promise.all([
                    fetch('/get-json/app'),
                    fetch('/get-json/usuarios')
                ]);

                const [dataApp, dataUser] = await Promise.all([
                    appResponse.json(),
                    userResponse.json()
                ]);

                // Muestra datos en el terminal
                displayJsonData('terminal', dataApp);
                displayJsonData('terminal2', dataUser);

                // Configura botones de descarga
                setupDownloadButton('downloadAppBackup', '/get-json/app/download', 'app-backup.json');
                setupDownloadButton('downloadUserBackup', '/get-json/usuarios/download', 'usuarios-backup.json');
            } catch (error) {
                console.error('Error al cargar los datos JSON:', error);
            }
        }

        // Resalta y muestra JSON en un contenedor
        function displayJsonData(containerId, jsonData) {
            const container = document.getElementById(containerId);
            container.innerHTML = highlightJson(jsonData);
            container.scrollTop = container.scrollHeight;
        }

        // Configura un botón para descargar un archivo
        function setupDownloadButton(buttonId, url, fileName) {
            const button = document.getElementById(buttonId);
            button.addEventListener('click', () => {
                const link = document.createElement('a');
                link.href = url;
                link.download = fileName;
                link.click();
            });
        }

        // Resalta el formato JSON
        function highlightJson(json) {
            const processValue = (value, indent = '') => {
                if (typeof value === 'string') return `<span class="json-string">"${value}"</span>`;
                if (typeof value === 'number') return `<span class="json-number">${value}</span>`;
                if (typeof value === 'boolean') return `<span class="json-boolean">${value}</span>`;
                if (value === null) return `<span class="json-null">null</span>`;
                if (Array.isArray(value)) {
                    const items = value.map(item => `${indent}  ${processValue(item, indent + '  ')}`).join(',\n');
                    return `<span class="json-array">[\n${items}\n${indent}]</span>`;
                }
                if (typeof value === 'object') {
                    const entries = Object.entries(value).map(
                        ([key, val]) => `${indent}  <span class="json-key">"${key}"</span>: ${processValue(val, indent + '  ')}`
                    ).join(',\n');
                    return `<span class="json-object">{\n${entries}\n${indent}}</span>`;
                }
                return value;
            };
            return `<span class="json-object">${processValue(json)}</span>`;
        }

        // Ejecuta al cargar la página
        window.onload = () => {
            const downloader = new APKDownloader();
            downloader.generateDownloadLinks();
            getJsonData();
        };
    </script>


</body>

</html>
